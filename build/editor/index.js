(()=>{"use strict";const e=window.React,t=window.wp.hooks,l=window.wp.i18n,a=window.wp.blocks,n=window.wp.primitives,s=(0,e.createElement)(n.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,e.createElement)(n.Path,{d:"M10.5 4v4h3V4H15v4h1.5a1 1 0 011 1v4l-3 4v2a1 1 0 01-1 1h-3a1 1 0 01-1-1v-2l-3-4V9a1 1 0 011-1H9V4h1.5zm.5 12.5v2h2v-2l3-4v-3H8v3l3 4z"}));(0,a.registerBlockVariation)("core/button",{name:"easy-plugin-stats/button",icon:s,title:(0,l.__)("Plugin Button","easy-plugin-stats"),description:(0,l.__)("Prompt visitors to take action with a button-style link. This button links to resources associated with a plugin hosted on WordPress.org.","easy-plugin-stats"),scope:["inserter"],example:{attributes:{className:"is-style-fill",text:(0,l.__)("Download","easy-plugin-stats")}},attributes:{metadata:{bindings:{url:{source:"easy-plugin-stats/button",args:{field:"download_link",slug:""}}}}},isActive:e=>"easy-plugin-stats/button"===e?.metadata?.bindings?.url?.source});const i=window.wp.blockEditor,o=window.wp.components;function r(t){var a,n,s;const{attributes:r,setAttributes:u}=t,{metadata:g}=r,p=null!==(a=g?.bindings?.url?.args?.slug)&&void 0!==a?a:"",d=null!==(n=g?.bindings?.url?.args?.field)&&void 0!==n?n:"download",c=null!==(s=g?.bindings?.url?.args?.cache)&&void 0!==s?s:"",_=[{label:(0,l.__)("Plugin homepage","easy-plugin-stats"),value:"homepage_link"},{label:(0,l.__)("Download link","easy-plugin-stats"),value:"download_link"},{label:(0,l.__)("Live preview","easy-plugin-stats"),value:"live_preview_link"},{label:(0,l.__)("Support forum","easy-plugin-stats"),value:"support_link"},{label:(0,l.__)("Reviews","easy-plugin-stats"),value:"reviews_link"},{label:(0,l.__)("Author profile","easy-plugin-stats"),value:"author_profile"},{label:(0,l.__)("Donate link","easy-plugin-stats"),value:"donate_link"}],m=(e,t)=>{u({metadata:{...g,bindings:{...g.bindings,url:{...g.bindings.url,args:{...g.bindings.url.args,[e]:t}}}}})};return(0,e.createElement)(i.InspectorControls,{group:"settings"},(0,e.createElement)(o.__experimentalToolsPanel,{label:(0,l.__)("Link settings","easy-plugin-stats"),resetAll:()=>{u({metadata:{...g,bindings:{...g.bindings,url:{...g.bindings.url,args:{field:"homepage_link",slug:"",cache:""}}}}})},dropdownMenuProps:{popoverProps:{placement:"left-start",offset:259}}},(0,e.createElement)(o.__experimentalToolsPanelItem,{label:(0,l.__)("Plugin slug","easy-plugin-stats"),hasValue:()=>p,onDeselect:()=>m("slug",""),isShownByDefault:!0},(0,e.createElement)(o.__experimentalInputControl,{label:(0,l.__)("Plugin slug","easy-plugin-stats"),value:p,onChange:e=>m("slug",e),type:"text",help:(0,l.__)("The plugin slug on WordPress.org.","easy-plugin-stats")})),(0,e.createElement)(o.__experimentalToolsPanelItem,{label:(0,l.__)("Link to","easy-plugin-stats"),hasValue:()=>d&&"homepage_link"!==d,onDeselect:()=>m("field","homepage_link"),isShownByDefault:!0},(0,e.createElement)(o.SelectControl,{label:(0,l.__)("Link to","easy-plugin-stats"),value:d,options:_,onChange:e=>m("field",e)})),(0,e.createElement)(o.__experimentalToolsPanelItem,{label:(0,l.__)("Cache"),hasValue:()=>c,onDeselect:()=>m("cache","")},(0,e.createElement)(o.__experimentalInputControl,{label:(0,l.__)("Cache (seconds)","easy-plugin-stats"),value:c,onChange:e=>m("cache",e),type:"number",help:(0,l.__)("WordPress.org plugin data is cached for 43200 seconds (12 hours) by default.","easy-plugin-stats"),placeholder:"43200",min:"3600"}))))}(0,t.addFilter)("editor.BlockEdit","easy-plugin-stats/add-inspector-controls",(function(t){return l=>"core/button"===l?.name&&"easy-plugin-stats/button"===l?.attributes?.metadata?.bindings?.url?.source?(0,e.createElement)(e.Fragment,null,(0,e.createElement)(t,{...l}),(0,e.createElement)(r,{...l})):(0,e.createElement)(t,{...l})}))})();