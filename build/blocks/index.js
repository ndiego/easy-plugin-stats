(()=>{var e,t={82:(e,t,l)=>{"use strict";const a=window.wp.blocks,n=window.React,r=window.wp.primitives,s=(0,n.createElement)(r.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,n.createElement)(r.Path,{d:"M10.5 4v4h3V4H15v4h1.5a1 1 0 011 1v4l-3 4v2a1 1 0 01-1 1h-3a1 1 0 01-1-1v-2l-3-4V9a1 1 0 011-1H9V4h1.5zm.5 12.5v2h2v-2l3-4v-3H8v3l3 4z"}));var o=l(942),i=l.n(o);const u=window.wp.i18n,c=window.wp.blockEditor,p=window.wp.components,g=window.wp.element,_=[{label:(0,u.__)("Active Installs","easy-plugin-stats"),value:"active_installs"},{label:(0,u.__)("Downloaded","easy-plugin-stats"),value:"downloaded"},{label:(0,u.__)("Name","easy-plugin-stats"),value:"name"},{label:(0,u.__)("Slug","easy-plugin-stats"),value:"slug"},{label:(0,u.__)("Version","easy-plugin-stats"),value:"version"},{label:(0,u.__)("Author","easy-plugin-stats"),value:"author"},{label:(0,u.__)("Contributors","easy-plugin-stats"),value:"contributors"},{label:(0,u.__)("Tags","easy-plugin-stats"),value:"tags"},{label:(0,u.__)("Requires","easy-plugin-stats"),value:"requires"},{label:(0,u.__)("Tested","easy-plugin-stats"),value:"tested"},{label:(0,u.__)("Number of Reviews","easy-plugin-stats"),value:"num_ratings"},{label:(0,u.__)("Rating out of 100","easy-plugin-stats"),value:"rating"},{label:(0,u.__)("Rating out of 5","easy-plugin-stats"),value:"five_rating"},{label:(0,u.__)("Star Rating","easy-plugin-stats"),value:"star_rating"},{label:(0,u.__)("Last Updated","easy-plugin-stats"),value:"last_updated"},{label:(0,u.__)("Date Added","easy-plugin-stats"),value:"added"},{label:(0,u.__)("Plugin Homepage Link","easy-plugin-stats"),value:"homepage_link",type:"link"},{label:(0,u.__)("Download Link","easy-plugin-stats"),value:"download_link",type:"link"},{label:(0,u.__)("Live Preview Link","easy-plugin-stats"),value:"live_preview_link",type:"link"},{label:(0,u.__)("Support Forum Link","easy-plugin-stats"),value:"support_link",type:"link"},{label:(0,u.__)("Reviews Link","easy-plugin-stats"),value:"reviews_link",type:"link"},{label:(0,u.__)("Author Profile Link","easy-plugin-stats"),value:"author_profile",type:"link"},{label:(0,u.__)("Donate Link","easy-plugin-stats"),value:"donate_link",type:"link"}],d=_.filter((e=>"link"===e.type)).map((e=>e.value)),f=["core/bold","core/italic","core/link","core/strikethrough","core/text-color"],v=(0,n.createElement)(r.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,n.createElement)(r.Path,{d:"M11.776 4.454a.25.25 0 01.448 0l2.069 4.192a.25.25 0 00.188.137l4.626.672a.25.25 0 01.139.426l-3.348 3.263a.25.25 0 00-.072.222l.79 4.607a.25.25 0 01-.362.263l-4.138-2.175a.25.25 0 00-.232 0l-4.138 2.175a.25.25 0 01-.363-.263l.79-4.607a.25.25 0 00-.071-.222L4.754 9.881a.25.25 0 01.139-.426l4.626-.672a.25.25 0 00.188-.137l2.069-4.192z"})),h=(0,n.createElement)(r.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,n.createElement)(r.Path,{d:"M9.518 8.783a.25.25 0 00.188-.137l2.069-4.192a.25.25 0 01.448 0l2.07 4.192a.25.25 0 00.187.137l4.626.672a.25.25 0 01.139.427l-3.347 3.262a.25.25 0 00-.072.222l.79 4.607a.25.25 0 01-.363.264l-4.137-2.176a.25.25 0 00-.233 0l-4.138 2.175a.25.25 0 01-.362-.263l.79-4.607a.25.25 0 00-.072-.222L4.753 9.882a.25.25 0 01.14-.427l4.625-.672zM12 14.533c.28 0 .559.067.814.2l1.895.997-.362-2.11a1.75 1.75 0 01.504-1.55l1.533-1.495-2.12-.308a1.75 1.75 0 01-1.317-.957L12 7.39v7.143z"})),m=(0,n.createElement)(r.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,n.createElement)(r.Path,{fillRule:"evenodd",d:"M9.706 8.646a.25.25 0 01-.188.137l-4.626.672a.25.25 0 00-.139.427l3.348 3.262a.25.25 0 01.072.222l-.79 4.607a.25.25 0 00.362.264l4.138-2.176a.25.25 0 01.233 0l4.137 2.175a.25.25 0 00.363-.263l-.79-4.607a.25.25 0 01.072-.222l3.347-3.262a.25.25 0 00-.139-.427l-4.626-.672a.25.25 0 01-.188-.137l-2.069-4.192a.25.25 0 00-.448 0L9.706 8.646zM12 7.39l-.948 1.921a1.75 1.75 0 01-1.317.957l-2.12.308 1.534 1.495c.412.402.6.982.503 1.55l-.362 2.11 1.896-.997a1.75 1.75 0 011.629 0l1.895.997-.362-2.11a1.75 1.75 0 01.504-1.55l1.533-1.495-2.12-.308a1.75 1.75 0 01-1.317-.957L12 7.39z",clipRule:"evenodd"})),b=window.wp.date,y=JSON.parse('{"UU":"outermost/plugin-stats"}');(0,a.registerBlockType)(y.UU,{icon:s,edit:function(e){var t;const{clientId:l,attributes:r,isSelected:s,setAttributes:o,insertBlocksAfter:y}=e,{field:w,slugs:k,textAlign:x,cache:E,prefix:S,suffix:C,prefixColor:O,suffixColor:L,linkText:P,linkTarget:T}=r,[A,j]=(0,g.useState)({}),[I,M]=(0,g.useState)(null),V=k?.length>1;(0,g.useEffect)((()=>{0!==k.length&&(async()=>{try{const e={};for(const t of k){const l=await fetch(`https://api.wordpress.org/plugins/info/1.0/${t}.json?fields=active_installs`);if(!l.ok)throw new Error("An error occurred fetching plugin data.");const a=await l.json();e[t]=a}j(e)}catch(e){M(e.message),j({})}})()}),[k]);const D=(0,c.__experimentalUseMultipleOriginColorsAndGradients)(),B=null===(t=D?.hasColorsOrGradients)||void 0===t||t,R=[{colorLabel:(0,u.__)("Prefix","easy-plugin-stats"),colorValue:O||"",onChange:e=>o({prefixColor:e}),resetAllFilter:()=>o({prefixColor:""})},{colorLabel:(0,u.__)("Suffix","easy-plugin-stats"),colorValue:L||"",onChange:e=>o({suffixColor:e}),resetAllFilter:()=>o({suffixColor:""})}],F=V?_.map((e=>"downloaded"!==e.value&&"active_installs"!==e.value?{...e,disabled:!0}:e)):_,N=(0,c.useBlockProps)({className:i()({[`has-text-align-${x}`]:x,[`field-${w}`]:w})});return(0,n.createElement)(n.Fragment,null,(0,n.createElement)(c.BlockControls,null,(0,n.createElement)(c.AlignmentToolbar,{value:x,onChange:e=>{o({textAlign:e})}})),B&&(0,n.createElement)(c.InspectorControls,{group:"color"},R.map((({colorLabel:e,colorValue:t,onChange:a,resetAllFilter:r})=>(0,n.createElement)(c.__experimentalColorGradientSettingsDropdown,{key:`icon-block-color-${e}`,__experimentalIsRenderedInSidebar:!0,settings:[{label:e,colorValue:t,onColorChange:a,isShownByDefault:!1,resetAllFilter:r,enableAlpha:!0}],panelId:l,...D})))),(0,n.createElement)(c.InspectorControls,{group:"settings"},(0,n.createElement)(p.__experimentalToolsPanel,{label:(0,u.__)("Settings"),resetAll:()=>o({field:"active_installs",slugs:[],cache:"",prefix:"",suffix:""}),dropdownMenuProps:{popoverProps:{placement:"left-start",offset:259}}},(0,n.createElement)(p.__experimentalToolsPanelItem,{label:(0,u.__)("Plugin slug"),hasValue:()=>k.length>0,onDeselect:()=>{M(),o({slugs:[]})},isShownByDefault:!0},(0,n.createElement)(p.FormTokenField,{label:(0,u.__)("Plugin slug","easy-plugin-stats"),value:k,onChange:e=>{M(),o({slugs:e}),e.length>1&&o({field:"active_installs"})}}),I&&(0,n.createElement)(p.Notice,{status:"error",isDismissible:!1},(0,u.__)("Stats for the corresponding plugin slug(s) could not be found. Check for typos and try again.","easy-plugin-stats"))),(0,n.createElement)(p.__experimentalToolsPanelItem,{label:(0,u.__)("Stat"),hasValue:()=>w&&"active_installs"!==w,onDeselect:()=>o({field:""}),isShownByDefault:!0},(0,n.createElement)(p.__experimentalVStack,{spacing:4},(0,n.createElement)(p.SelectControl,{label:(0,u.__)("Stat","easy-plugin-stats"),value:w,options:F,onChange:e=>o({field:e})}),d.includes(w)&&(0,n.createElement)(n.Fragment,null,(0,n.createElement)(p.__experimentalInputControl,{label:(0,u.__)("Link Text","easy-plugin-stats"),value:P,onChange:e=>o({linkText:e}),type:"text"}),(0,n.createElement)(p.CheckboxControl,{label:(0,u.__)("Open in new tab.","easy-plugin-stats"),checked:T,onChange:()=>o({linkTarget:!T})})))),(0,n.createElement)(p.__experimentalToolsPanelItem,{label:(0,u.__)("Cache"),hasValue:()=>E,onDeselect:()=>o({cache:""})},(0,n.createElement)(p.__experimentalInputControl,{label:(0,u.__)("Cache (seconds)","easy-plugin-stats"),value:E,onChange:e=>o({cache:e}),type:"number",help:(0,u.__)("WordPress.org plugin data is cached for 43200 seconds (12 hours) by default.","easy-plugin-stats"),placeholder:"43200",min:"3600"})))),(0,n.createElement)("p",{...N},(s||S)&&(0,n.createElement)(c.RichText,{identifier:"prefix",allowedFormats:f,className:"wp-block-easy-plugin-stats__prefix","aria-label":(0,u.__)("Prefix","easy-plugin-stats"),placeholder:(0,u.__)("Prefix","easy-plugin-stats")+" ",value:S,style:{color:O||"currentColor"},onChange:e=>o({prefix:e}),tagName:"span"}),function(e,t,l){const{field:a,slugs:r,linkText:s}=e;if(l||0===r.length||0===Object.keys(t).length)return(0,n.createElement)("span",{"data-placeholder":(0,u.__)("Plugin Stats","easy-plugin-stats")});if(("active_installs"===a||"downloaded"===a)&&Object.keys(t).length>1){let e=0;for(const l in t)if(t.hasOwnProperty(l)){const n=t[l][a];n&&(e+=n)}return e.toLocaleString()}const o=t[Object.keys(t)[0]][a];if("author"===a)return(0,n.createElement)("span",{dangerouslySetInnerHTML:{__html:o}});if("contributors"===a){let e="";return Object.keys(o).length>0&&(e=Object.entries(o).map((([e,t])=>`<a href="${t}" target="_blank">${e}</a>`)).join(", ")),(0,n.createElement)("span",{dangerouslySetInnerHTML:{__html:e}})}if("tags"===a){let e="";return Object.keys(o).length>0&&(e=Object.entries(o).map((([e,t])=>`<a href="https://wordpress.org/plugins/tags/${e}" target="_blank">${t}</a>`)).join(", ")),(0,n.createElement)("span",{dangerouslySetInnerHTML:{__html:e}})}var i;if("five_rating"===a)return(null!==(i=t[Object.keys(t)[0]]?.rating)&&void 0!==i?i:100)/100*5;if("last_updated"===a||"added"===a){const e=(0,b.getSettings)(),t=moment(o,"YYYY-MM-DD");return(0,b.format)(e.formats.date,t)}if("star_rating"===a){var c;const e=(null!==(c=t[Object.keys(t)[0]]?.rating)&&void 0!==c?c:100)/100*5,l=Math.floor(e),a=e%1>=.5?1:0,r=5-l-a,s=[];for(let e=0;e<l;e++)s.push(v);1===a&&s.push(h);for(let e=0;e<r;e++)s.push(m);return(0,n.createElement)("span",{className:"star-rating-container",title:`${e} out of 5 stars.`},s)}if(d.includes(a)){const e=_.find((e=>e.value===a)),t=`<a href="${o}" target="_blank">${s||e.label.replace(" Link","")}</a>`;return(0,n.createElement)("span",{dangerouslySetInnerHTML:{__html:t}})}return o>1e3?o.toLocaleString():o}(r,A,I),(s||C)&&(0,n.createElement)(c.RichText,{identifier:"suffix",allowedFormats:f,className:"wp-block-post-terms__suffix","aria-label":(0,u.__)("Suffix"),placeholder:" "+(0,u.__)("Suffix"),value:C,style:{color:L||"currentColor"},onChange:e=>o({suffix:e}),tagName:"span",__unstableOnSplitAtEnd:()=>y((0,a.createBlock)((0,a.getDefaultBlockName)()))})))}})},942:(e,t)=>{var l;!function(){"use strict";var a={}.hasOwnProperty;function n(){for(var e="",t=0;t<arguments.length;t++){var l=arguments[t];l&&(e=s(e,r(l)))}return e}function r(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return n.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var l in e)a.call(e,l)&&e[l]&&(t=s(t,l));return t}function s(e,t){return t?e?e+" "+t:e+t:e}e.exports?(n.default=n,e.exports=n):void 0===(l=function(){return n}.apply(t,[]))||(e.exports=l)}()}},l={};function a(e){var n=l[e];if(void 0!==n)return n.exports;var r=l[e]={exports:{}};return t[e](r,r.exports,a),r.exports}a.m=t,e=[],a.O=(t,l,n,r)=>{if(!l){var s=1/0;for(c=0;c<e.length;c++){for(var[l,n,r]=e[c],o=!0,i=0;i<l.length;i++)(!1&r||s>=r)&&Object.keys(a.O).every((e=>a.O[e](l[i])))?l.splice(i--,1):(o=!1,r<s&&(s=r));if(o){e.splice(c--,1);var u=n();void 0!==u&&(t=u)}}return t}r=r||0;for(var c=e.length;c>0&&e[c-1][2]>r;c--)e[c]=e[c-1];e[c]=[l,n,r]},a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var l in t)a.o(t,l)&&!a.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:t[l]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={472:0,456:0};a.O.j=t=>0===e[t];var t=(t,l)=>{var n,r,[s,o,i]=l,u=0;if(s.some((t=>0!==e[t]))){for(n in o)a.o(o,n)&&(a.m[n]=o[n]);if(i)var c=i(a)}for(t&&t(l);u<s.length;u++)r=s[u],a.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return a.O(c)},l=globalThis.webpackChunkeasy_plugin_stats=globalThis.webpackChunkeasy_plugin_stats||[];l.forEach(t.bind(null,0)),l.push=t.bind(null,l.push.bind(l))})();var n=a.O(void 0,[456],(()=>a(82)));n=a.O(n)})();