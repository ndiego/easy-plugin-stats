(()=>{var e,t={732:(e,t,l)=>{"use strict";const a=window.wp.blocks,n=window.React,s=window.wp.primitives,r=(0,n.createElement)(s.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,n.createElement)(s.Path,{d:"M10.5 4v4h3V4H15v4h1.5a1 1 0 011 1v4l-3 4v2a1 1 0 01-1 1h-3a1 1 0 01-1-1v-2l-3-4V9a1 1 0 011-1H9V4h1.5zm.5 12.5v2h2v-2l3-4v-3H8v3l3 4z"}));var o=l(942),i=l.n(o);const u=window.wp.i18n,p=window.wp.blockEditor,c=window.wp.components,g=window.wp.element,_=new Date,d=[{label:(0,u.__)("Active installs","easy-plugin-stats"),value:"active_installs",default:1e3},{label:(0,u.__)("Downloaded","easy-plugin-stats"),value:"downloaded",default:12345},{label:(0,u.__)("Name","easy-plugin-stats"),value:"name",default:(0,u.__)("Plugin Name","easy-plugin-stats")},{label:(0,u.__)("Version","easy-plugin-stats"),value:"version",default:"1.0.0"},{label:(0,u.__)("Author","easy-plugin-stats"),value:"author",default:(0,u.__)("Plugin Author","easy-plugin-stats")},{label:(0,u.__)("Contributors","easy-plugin-stats"),value:"contributors",default:{"example-contributor":"https://profiles.wordpress.org/me/"}},{label:(0,u.__)("Tags","easy-plugin-stats"),value:"tags",default:{"example-tag":"example-tag"}},{label:(0,u.__)("Requires","easy-plugin-stats"),value:"requires",default:"6.5"},{label:(0,u.__)("Tested up to","easy-plugin-stats"),value:"tested",default:"6.5"},{label:(0,u.__)("Number of reviews","easy-plugin-stats"),value:"num_ratings",default:"12"},{label:(0,u.__)("Rating out of 100","easy-plugin-stats"),value:"rating",default:"100"},{label:(0,u.__)("Rating out of 5","easy-plugin-stats"),value:"five_rating",default:"5"},{label:(0,u.__)("Star rating","easy-plugin-stats"),value:"star_rating"},{label:(0,u.__)("Last updated","easy-plugin-stats"),value:"last_updated",default:_},{label:(0,u.__)("Date added","easy-plugin-stats"),value:"added",default:_},{label:(0,u.__)("Plugin homepage link","easy-plugin-stats"),value:"homepage_link",type:"link"},{label:(0,u.__)("Download link","easy-plugin-stats"),value:"download_link",type:"link"},{label:(0,u.__)("Live preview link","easy-plugin-stats"),value:"live_preview_link",type:"link"},{label:(0,u.__)("Support forum link","easy-plugin-stats"),value:"support_link",type:"link"},{label:(0,u.__)("Reviews link","easy-plugin-stats"),value:"reviews_link",type:"link"},{label:(0,u.__)("Author profile link","easy-plugin-stats"),value:"author_profile",type:"link"},{label:(0,u.__)("Donate link","easy-plugin-stats"),value:"donate_link",type:"link"}],f=d.filter((e=>"link"===e.type)).map((e=>e.value)),m=d.filter((e=>!!e.default)).reduce(((e,t)=>(e[t.value]=t.default,e)),{}),h=(0,n.createElement)(s.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,n.createElement)(s.Path,{d:"M11.776 4.454a.25.25 0 01.448 0l2.069 4.192a.25.25 0 00.188.137l4.626.672a.25.25 0 01.139.426l-3.348 3.263a.25.25 0 00-.072.222l.79 4.607a.25.25 0 01-.362.263l-4.138-2.175a.25.25 0 00-.232 0l-4.138 2.175a.25.25 0 01-.363-.263l.79-4.607a.25.25 0 00-.071-.222L4.754 9.881a.25.25 0 01.139-.426l4.626-.672a.25.25 0 00.188-.137l2.069-4.192z"})),v=(0,n.createElement)(s.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,n.createElement)(s.Path,{d:"M9.518 8.783a.25.25 0 00.188-.137l2.069-4.192a.25.25 0 01.448 0l2.07 4.192a.25.25 0 00.187.137l4.626.672a.25.25 0 01.139.427l-3.347 3.262a.25.25 0 00-.072.222l.79 4.607a.25.25 0 01-.363.264l-4.137-2.176a.25.25 0 00-.233 0l-4.138 2.175a.25.25 0 01-.362-.263l.79-4.607a.25.25 0 00-.072-.222L4.753 9.882a.25.25 0 01.14-.427l4.625-.672zM12 14.533c.28 0 .559.067.814.2l1.895.997-.362-2.11a1.75 1.75 0 01.504-1.55l1.533-1.495-2.12-.308a1.75 1.75 0 01-1.317-.957L12 7.39v7.143z"})),y=(0,n.createElement)(s.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,n.createElement)(s.Path,{fillRule:"evenodd",d:"M9.706 8.646a.25.25 0 01-.188.137l-4.626.672a.25.25 0 00-.139.427l3.348 3.262a.25.25 0 01.072.222l-.79 4.607a.25.25 0 00.362.264l4.138-2.176a.25.25 0 01.233 0l4.137 2.175a.25.25 0 00.363-.263l-.79-4.607a.25.25 0 01.072-.222l3.347-3.262a.25.25 0 00-.139-.427l-4.626-.672a.25.25 0 01-.188-.137l-2.069-4.192a.25.25 0 00-.448 0L9.706 8.646zM12 7.39l-.948 1.921a1.75 1.75 0 01-1.317.957l-2.12.308 1.534 1.495c.412.402.6.982.503 1.55l-.362 2.11 1.896-.997a1.75 1.75 0 011.629 0l1.895.997-.362-2.11a1.75 1.75 0 01.504-1.55l1.533-1.495-2.12-.308a1.75 1.75 0 01-1.317-.957L12 7.39z",clipRule:"evenodd"})),b=window.wp.date,w=["core/bold","core/italic","core/link","core/strikethrough","core/text-color"],k=JSON.parse('{"UU":"outermost/plugin-stat"}');(0,a.registerBlockType)(k.UU,{icon:r,edit:function(e){const{clientId:t,attributes:l,isSelected:s,setAttributes:r,insertBlocksAfter:o}=e,{field:_,slugs:k,textAlign:x,cache:E,prefix:S,suffix:C,prefixColor:O,suffixColor:P,linkText:T,linkTarget:A}=l,[j,L]=(0,g.useState)({}),[D,M]=(0,g.useState)(!1),[N,V]=(0,g.useState)(null),I=k?.length>1;(0,g.useEffect)((()=>{0!==k.length&&(async()=>{M(!0);try{const e=k.map((e=>fetch(`https://api.wordpress.org/plugins/info/1.0/${e}.json?fields=active_installs`).then((e=>{if(!e.ok)throw new Error((0,u.__)("An error occurred fetching plugin data.","easy-plugin-stats"));return e.json()})).then((t=>({slug:e,data:t}))))),t=await Promise.all(e),l={};t.forEach((({slug:e,data:t})=>{l[e]=t})),L(l)}catch(e){V(e.message),L({})}finally{M(!1)}})()}),[k]);const B=(0,p.__experimentalUseMultipleOriginColorsAndGradients)(),F=[{colorLabel:(0,u.__)("Prefix","easy-plugin-stats"),colorValue:O||"",onChange:e=>r({prefixColor:e}),resetAllFilter:()=>r({prefixColor:""})},{colorLabel:(0,u.__)("Suffix","easy-plugin-stats"),colorValue:P||"",onChange:e=>r({suffixColor:e}),resetAllFilter:()=>r({suffixColor:""})}],$=I?d.map((e=>"downloaded"!==e.value&&"active_installs"!==e.value?{...e,disabled:!0}:e)):d,R=(0,p.useBlockProps)({className:i()({[`has-text-align-${x}`]:x,[`field-${_}`]:_})});return(0,n.createElement)(n.Fragment,null,(0,n.createElement)(p.BlockControls,null,(0,n.createElement)(p.AlignmentToolbar,{value:x,onChange:e=>{r({textAlign:e})}})),(0,n.createElement)(p.InspectorControls,{group:"color"},F.map((({colorLabel:e,colorValue:l,onChange:a,resetAllFilter:s})=>(0,n.createElement)(p.__experimentalColorGradientSettingsDropdown,{key:`icon-block-color-${e}`,__experimentalIsRenderedInSidebar:!0,settings:[{label:e,colorValue:l,onColorChange:a,isShownByDefault:!1,resetAllFilter:s,enableAlpha:!0}],panelId:t,...B})))),(0,n.createElement)(p.InspectorControls,{group:"settings"},(0,n.createElement)(c.__experimentalToolsPanel,{className:"outermost-plugin-stat__settings-panel",label:(0,u.__)("Settings","easy-plugin-stats"),resetAll:()=>r({field:"active_installs",slugs:[],cache:"",prefix:"",suffix:""}),dropdownMenuProps:{popoverProps:{placement:"left-start",offset:259}}},(0,n.createElement)(c.__experimentalToolsPanelItem,{label:(0,u.__)("Plugin slug","easy-plugin-stats"),hasValue:()=>k.length>0,onDeselect:()=>{V(),r({slugs:[]})},isShownByDefault:!0},(0,n.createElement)(c.FormTokenField,{label:(0,u.__)("Plugin slug","easy-plugin-stats"),value:k,onChange:e=>{V(),r({slugs:e}),e.length>1&&"active_installs"!==_&&"downloaded"!==_&&r({field:"active_installs"})},tokenizeOnSpace:!0,__experimentalShowHowTo:!1}),(0,n.createElement)("p",{className:"components-base-control__help"},(0,u.__)("The plugin slug on WordPress.org. For aggregate stats, separate multiple slugs with commas, spaces, or the Enter key.","easy-plugin-stats")),N&&(0,n.createElement)(c.Notice,{status:"error",isDismissible:!1},(0,u.__)("Stats for the corresponding plugin slug(s) could not be found. Check for typos and try again.","easy-plugin-stats"))),(0,n.createElement)(c.__experimentalToolsPanelItem,{label:(0,u.__)("Stat","easy-plugin-stats"),hasValue:()=>_&&"active_installs"!==_,onDeselect:()=>r({field:""}),isShownByDefault:!0},(0,n.createElement)(c.__experimentalVStack,{spacing:4},(0,n.createElement)(c.SelectControl,{label:(0,u.__)("Stat","easy-plugin-stats"),value:_,options:$,onChange:e=>r({field:e})}),f.includes(_)&&(0,n.createElement)(n.Fragment,null,(0,n.createElement)(c.__experimentalInputControl,{label:(0,u.__)("Link Text","easy-plugin-stats"),value:T,onChange:e=>r({linkText:e}),type:"text"}),(0,n.createElement)(c.CheckboxControl,{label:(0,u.__)("Open in new tab.","easy-plugin-stats"),checked:A,onChange:()=>r({linkTarget:!A})})))),(0,n.createElement)(c.__experimentalToolsPanelItem,{label:(0,u.__)("Cache"),hasValue:()=>E,onDeselect:()=>r({cache:""})},(0,n.createElement)(c.__experimentalInputControl,{label:(0,u.__)("Cache (seconds)","easy-plugin-stats"),value:E,onChange:e=>r({cache:e}),type:"number",help:(0,u.__)("WordPress.org plugin data is cached for 43200 seconds (12 hours) by default.","easy-plugin-stats"),placeholder:"43200",min:"3600"})))),(0,n.createElement)("p",{...R},(0,n.createElement)("span",{class:"wp-block-outermost-plugin-stat__container"},(s||S)&&(0,n.createElement)(p.RichText,{identifier:"prefix",allowedFormats:w,className:"wp-block-easy-plugin-stats__prefix","aria-label":(0,u.__)("Prefix","easy-plugin-stats"),placeholder:(0,u.__)("Prefix","easy-plugin-stats")+" ",value:S,style:{color:O||"currentColor"},onChange:e=>r({prefix:e}),tagName:"span"}),(0,n.createElement)("span",{className:"stat-container",onClick:e=>{"A"===e.target.tagName&&e.preventDefault()}},D?(0,n.createElement)(c.Spinner,null):function(e,t,l){const{field:a,slugs:s,linkText:r}=e,o=d.some((e=>e.value===a))?a:"active_installs";let i=t;if(l||0===s.length||0===Object.keys(i).length){if(!a||0===s.length)return(0,n.createElement)("span",{"data-placeholder":(0,u.__)("Plugin Stat","easy-plugin-stats")});i={"plugin-slug":m}}if(("active_installs"===o||"downloaded"===o)&&Object.keys(i).length>1){let e=0;for(const t in i)if(i.hasOwnProperty(t)){const l=i[t][o];l&&(e+=l)}return e.toLocaleString()}const p=i[Object.keys(i)[0]][o];if("author"===o)return(0,n.createElement)("span",{dangerouslySetInnerHTML:{__html:p}});if("contributors"===o){let e="";return e=Object.keys(p).length>0?Object.entries(p).map((([e,t])=>`<a href="${t}" target="_blank">${e}</a>`)).join(", "):(0,u.__)("No contributors","easy-plugin-stats"),(0,n.createElement)("span",{dangerouslySetInnerHTML:{__html:e}})}if("tags"===o){let e="";return Object.keys(p).length>0&&(e=Object.entries(p).map((([e,t])=>`<a href="https://wordpress.org/plugins/tags/${e}" target="_blank">${t}</a>`)).join(", ")),(0,n.createElement)("span",{dangerouslySetInnerHTML:{__html:e}})}var c;if("five_rating"===o)return(null!==(c=i[Object.keys(i)[0]]?.rating)&&void 0!==c?c:100)/100*5;if("last_updated"===o||"added"===o){const e=(0,b.getSettings)(),t=moment(p,"YYYY-MM-DD");return(0,b.format)(e.formats.date,t)}if("star_rating"===o){var g;const e=(null!==(g=i[Object.keys(i)[0]]?.rating)&&void 0!==g?g:100)/100*5,t=(e%1).toFixed(2),l=t>=.8?Math.floor(e+1):Math.floor(e),a=t<.8&&t>.2?1:0,s=5-l-a,r=[];for(let e=0;e<l;e++)r.push(h);1===a&&r.push(v);for(let e=0;e<s;e++)r.push(y);return(0,n.createElement)("span",{className:"star-rating__container",title:`${e} out of 5 stars.`},r)}if(f.includes(o)){const e=d.find((e=>e.value===o)),t=`<a href="${p}" target="_blank">${r||e.label.replace(" Link","")}</a>`;return(0,n.createElement)("span",{dangerouslySetInnerHTML:{__html:t}})}return p>=1e3?p.toLocaleString():p}(l,j,N)),(s||C)&&(0,n.createElement)(p.RichText,{identifier:"suffix",allowedFormats:w,className:"wp-block-post-terms__suffix","aria-label":(0,u.__)("Suffix","easy-plugin-stats"),placeholder:" "+(0,u.__)("Suffix","easy-plugin-stats"),value:C,style:{color:P||"currentColor"},onChange:e=>r({suffix:e}),tagName:"span",__unstableOnSplitAtEnd:()=>o((0,a.createBlock)((0,a.getDefaultBlockName)()))}))))}})},942:(e,t)=>{var l;!function(){"use strict";var a={}.hasOwnProperty;function n(){for(var e="",t=0;t<arguments.length;t++){var l=arguments[t];l&&(e=r(e,s(l)))}return e}function s(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return n.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var l in e)a.call(e,l)&&e[l]&&(t=r(t,l));return t}function r(e,t){return t?e?e+" "+t:e+t:e}e.exports?(n.default=n,e.exports=n):void 0===(l=function(){return n}.apply(t,[]))||(e.exports=l)}()}},l={};function a(e){var n=l[e];if(void 0!==n)return n.exports;var s=l[e]={exports:{}};return t[e](s,s.exports,a),s.exports}a.m=t,e=[],a.O=(t,l,n,s)=>{if(!l){var r=1/0;for(p=0;p<e.length;p++){for(var[l,n,s]=e[p],o=!0,i=0;i<l.length;i++)(!1&s||r>=s)&&Object.keys(a.O).every((e=>a.O[e](l[i])))?l.splice(i--,1):(o=!1,s<r&&(r=s));if(o){e.splice(p--,1);var u=n();void 0!==u&&(t=u)}}return t}s=s||0;for(var p=e.length;p>0&&e[p-1][2]>s;p--)e[p]=e[p-1];e[p]=[l,n,s]},a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var l in t)a.o(t,l)&&!a.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:t[l]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={166:0,74:0};a.O.j=t=>0===e[t];var t=(t,l)=>{var n,s,[r,o,i]=l,u=0;if(r.some((t=>0!==e[t]))){for(n in o)a.o(o,n)&&(a.m[n]=o[n]);if(i)var p=i(a)}for(t&&t(l);u<r.length;u++)s=r[u],a.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return a.O(p)},l=globalThis.webpackChunkeasy_plugin_stats=globalThis.webpackChunkeasy_plugin_stats||[];l.forEach(t.bind(null,0)),l.push=t.bind(null,l.push.bind(l))})();var n=a.O(void 0,[74],(()=>a(732)));n=a.O(n)})();